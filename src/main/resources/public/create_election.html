<!DOCTYPE html>
<html>
<head>
    <title>Create Election</title>
    <link rel="stylesheet" href="/css/common.css">
</head>
<body>

<div class="card">
    <h2>Create Join Election</h2>

    <div class="form-group">
        <label>Password</label>
        <input id="password" type="password">
    </div>

    <div class="form-group">
        <label>Node Name</label>
        <input id="nodeName">
    </div>

    <div class="form-group">
        <label>Time Limit (minutes)</label>
        <input id="time" type="number">
    </div>

    <div class="form-group">
        <label>Description</label>
        <textarea id="description"></textarea>
    </div>

    <button onclick="createElection()">Create Election</button>

    <div id="result" class="alert"></div>
</div>

<script>
    async function createElection() {
        const body = {
            password: document.getElementById("password").value,
            nodeName: document.getElementById("nodeName").value,
            timeMinutes: parseInt(document.getElementById("time").value),
            description: document.getElementById("description").value
        };

        const res = await fetch("/election/create-join", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(body)
        });

        const data = await res.json();

        const box = document.getElementById("result");
        if (data.error) {
            box.className = "alert error";
            box.textContent = data.error;
        } else {
            box.className = "alert success";
            box.textContent = "Election created successfully!";

        }
        box.style.display = "block";
    }
</script>

</body>
</html>
